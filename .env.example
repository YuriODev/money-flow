# =============================================================================
# Money Flow - Environment Configuration Example
# =============================================================================
# Copy this file to .env and configure with your values.
# IMPORTANT: Never commit .env to version control!
#
# Security Notes:
#   - Generate strong secrets for production (see comments below)
#   - Use different values for development and production
#   - Rotate secrets periodically in production
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Development: SQLite (simpler setup)
DATABASE_URL=sqlite+aiosqlite:///./subscriptions.db

# Production: PostgreSQL (recommended)
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/subscriptions

# Docker Compose (internal network)
# DATABASE_URL=postgresql+asyncpg://subscriptions:localdev@db:5432/subscriptions

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000

# Debug mode - DISABLE in production (set to false)
# When enabled: detailed error messages, CSP report-only, no HSTS
DEBUG=true

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# List of allowed origins for cross-origin requests
# SECURITY: Never use "*" in production!
CORS_ORIGINS=["http://localhost:3000","http://localhost:8001"]

# Additional CORS settings (optional, defaults are secure)
# CORS_ALLOW_CREDENTIALS=true
# CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
# CORS_ALLOW_HEADERS=["Authorization","Content-Type","Accept","Origin","X-Requested-With"]
# CORS_MAX_AGE=600

# -----------------------------------------------------------------------------
# Authentication - JWT Configuration
# -----------------------------------------------------------------------------
# SECURITY: Generate a strong secret for production!
# Run: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=CHANGE-THIS-SECRET-KEY-IN-PRODUCTION

# Token expiration settings
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# JWT Algorithm (HS256 is secure for symmetric secrets)
JWT_ALGORITHM=HS256

# -----------------------------------------------------------------------------
# Claude AI Configuration (Agentic Features)
# -----------------------------------------------------------------------------
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-key-here

# -----------------------------------------------------------------------------
# Currency Configuration
# -----------------------------------------------------------------------------
DEFAULT_CURRENCY=GBP
SUPPORTED_CURRENCIES=["GBP","EUR","USD","UAH"]

# Open Exchange Rates API (for currency conversion)
# Get your API key from: https://openexchangerates.org/
EXCHANGE_RATE_API_KEY=your-api-key-here
CACHE_TTL_EXCHANGE_RATES=3600

# -----------------------------------------------------------------------------
# Redis Configuration (Caching & Rate Limiting)
# -----------------------------------------------------------------------------
# Development (local Redis)
REDIS_URL=redis://localhost:6379/0

# Docker Compose (internal network)
# REDIS_URL=redis://redis:6379/0

# Production (with authentication)
# REDIS_URL=redis://:password@redis-host:6379/0

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100/minute
RATE_LIMIT_GET=100/minute
RATE_LIMIT_WRITE=20/minute
RATE_LIMIT_AGENT=10/minute
RATE_LIMIT_AUTH=5/minute

# -----------------------------------------------------------------------------
# RAG Configuration (Semantic Search & Context)
# -----------------------------------------------------------------------------
RAG_ENABLED=true

# Qdrant Vector Database
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334

# Embedding Model (Sentence Transformers)
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384

# RAG Search Settings
RAG_TOP_K=5
RAG_MIN_SCORE=0.5
RAG_CONTEXT_WINDOW=5
RAG_CACHE_TTL=3600

# -----------------------------------------------------------------------------
# Google Cloud Platform (Production Deployment)
# -----------------------------------------------------------------------------
GCP_PROJECT_ID=your-project-id
GCP_REGION=us-central1

# -----------------------------------------------------------------------------
# Observability Configuration
# -----------------------------------------------------------------------------
# Sentry Error Tracking
# Get your DSN from: https://sentry.io/
# SENTRY_DSN=https://your-public-key@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics

# -----------------------------------------------------------------------------
# Telegram Notifications (CI/CD Deployment Alerts)
# -----------------------------------------------------------------------------
# Get your bot token from @BotFather on Telegram
# Get your chat ID by messaging @userinfobot or using the API
# These are configured as GitHub Secrets: TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID
# TELEGRAM_BOT_TOKEN=your-bot-token-here
# TELEGRAM_CHAT_ID=your-chat-id-here

# =============================================================================
# Production Checklist
# =============================================================================
# Before deploying to production, ensure:
#
# [ ] DEBUG=false
# [ ] JWT_SECRET_KEY is a strong, unique secret (64+ random hex chars)
# [ ] ANTHROPIC_API_KEY is set (if using AI features)
# [ ] DATABASE_URL points to production PostgreSQL
# [ ] REDIS_URL points to production Redis
# [ ] CORS_ORIGINS contains only your production frontend URL(s)
# [ ] SENTRY_DSN is set for error tracking
# [ ] SENTRY_ENVIRONMENT=production
# [ ] All default passwords/secrets have been changed
# [ ] Environment variables are set via secure means (not .env file)
#
# For GCP Cloud Run, use Secret Manager for sensitive values.
# =============================================================================
